# list of non-autogenerated asset (excluding py script)
cidfontinfo-SC
cidfontinfo-TC
cmap.raw
feature_SC.fea
feature_TC.fea
FontMenuNameDB
HuaYou-feature-main.fea
HuaYou-feature-template.fea
huayou-override-name.txt
huayou-override-map.txt
huayou-override-uni.txt
UVS_sequence
WD-XLLubrifont-(region).ttf


# building font:
1. merge font together
py merge_font.py 
(optional hibernate) ; shutdown /h

2. prepare file
- copy HuaYou.ttx into HuaYou-base.ttx (`py merge_ttx.py`) generate HuaYou-src.ttx, then `ttx HuaYou-src.ttx` make font
- copy cmap.raw into cmap_SC.txt and cmap_TC.txt
- prepare feature_SC.fea and feature_TC.fea (next section)
- prepare CID-keyed UVS file (`py UVS_parser.py`) -> UVS_sequence_CID

3. build with makeotf
tx -t1 .\HuaYou-src.ttf font.pfa
mergeFonts -cid .\cidfontinfo-SC cidfont-SC.ps .\map_HuaYou.txt font.pfa
mergeFonts -cid .\cidfontinfo-TC cidfont-TC.ps .\map_HuaYou.txt font.pfa

edit cidfont.ps: 
``` Private values: 10
/BlueValues [-250 -250 1100 1100] def
/LanguageGroup 1 def
/StdHW [90] def
/StdVW [90] def
```
check cidfont.ps: tx -pdf cidfont-SC.ps cidfont-SC.pdf

#SC
makeotf -f cidfont-SC.ps -omitMacNames -mf .\FontMenuNameDB -ff .\feature_SC.fea -cs 25 -r -ch .\cmap_SC.txt -ci UVS_sequence_CID
#TC
makeotf -f cidfont-TC.ps -omitMacNames -mf .\FontMenuNameDB -ff .\feature_TC.fea -cs 2 -r -ch .\cmap_TC.txt -ci UVS_sequence_CID

delete signature:
sfntedit -d DSIG .\WD-XLLubrifontSC-Regular.otf
sfntedit -d DSIG .\WD-XLLubrifontTC-Regular.otf

4. merge into otc 
#escape space in CFF with `, only works in Windows Powershell (quotation marks hv bug)
otf2otc -t CFF` =0 -o WD-XLLubrifont.ttc .\WD-XLLubrifontSC-Regular.otf .\WD-XLLubrifontTC-Regular.otf

5. Font check (result store in HTML)
fontbakery check-universal --html check-SC.html WD-XLLubrifontSC-Regular.otf
fontbakery check-universal --html check-TC.html WD-XLLubrifontTC-Regular.otf
fontbakery check-universal --html check-TTC.html WD-XLLubrifont.ttc

Ext: build webfont
py convert_webfonts.py

# building features :
1. auto list SC/TC pair for smpl/trad
py sc-tc-conv/csv-generate.py (both simp-to-trad and trad-to-simp)
copy csv-simp-to-trad.txt and csv-trad-to-simp.txt over

2. generate features for smpl/trad
py split_simp_trad_cid.py (#OLD: run 2 times, change simp-trad to trad-simp, NEW will autorun)

3. run `py fea_convert_name2cid.py` on HuaYou-feature-main.fea (generate HuaYou-feature-CID.fea)

(all files are handled via include now so no need to copy lookup all around)

### OLD ###
2. generate features for smpl/trad: `py split_simp_trad.py`
3. copy all feature inside opentype-simp-to-trad-split.fea and opentype-trad-to-simp-split.fea to HuaYou-feature-main.fea
4. run `py fea_convert_name2cid.py` on HuaYou-feature-main.fea (generate HuaYou-feature-CID.fea)
5. merge HuaYou-feature-CID.fea with HuaYou-feature-template.fea and feature_gsub_SC_to_TC.fea/feature_gsub_TC_to_SC.fea (for locl) in feature_SC.fea
6. remove lookup vert_SC; in vert and vrt2 for feature_TC.fea